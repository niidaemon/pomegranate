# ===================================================================
# PostgreSQL Client Authentication Configuration File
# ===================================================================
# Format:
#   TYPE  DATABASE        USER            ADDRESS                 METHOD
# ===================================================================

# Local postgres user connection
local   all             postgres                                peer

# Local user connections with password
local   all             all                                     scram-sha-256

# Replication connections from standby servers
host    replication     replicator       10.0.0.0/8             scram-sha-256

# Auth service connections
host    auth_db         auth_service     10.0.0.0/8             scram-sha-256

# Catalog service connections
host    catalog_db      catalog_service  10.0.0.0/8             scram-sha-256

# Cart service connections
host    cart_db         cart_service     10.0.0.0/8             scram-sha-256

# Orders service connections
host    orders_db       orders_service   10.0.0.0/8             scram-sha-256

# Inventory service connections
host    inventory_db    inventory_service 10.0.0.0/8            scram-sha-256

# Payments service connections
host    payments_db     payments_service 10.0.0.0/8             scram-sha-256

# Analytics service connections
host    analytics_db    analytics_service 10.0.0.0/8            scram-sha-256

# Prometheus exporter connections
host    all             exporter         10.0.0.0/8             scram-sha-256

# Reject all other connections
host    all             all              0.0.0.0/0              reject
