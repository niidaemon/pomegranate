[databases]
auth_db              = host=haproxy port=5432 dbname=auth_db
catalog_db           = host=haproxy port=5432 dbname=catalog_db
cart_db              = host=haproxy port=5432 dbname=cart_db
orders_db            = host=haproxy port=5432 dbname=orders_db
inventory_db         = host=haproxy port=5432 dbname=inventory_db
payments_db          = host=haproxy port=5432 dbname=payments_db
analytics_db         = host=haproxy port=5432 dbname=analytics_db
deliveries_db        = host=haproxy port=5432 dbname=deliveries_db
notifications_db     = host=haproxy port=5432 dbname=notifications_db

auth_db_readonly     = host=haproxy port=5433 dbname=auth_db
catalog_db_readonly  = host=haproxy port=5433 dbname=catalog_db


[pgbouncer]
pool_mode = transaction

listen_addr = 0.0.0.0
listen_port = 6432

auth_type = scram-sha-256
auth_file = /etc/pgbouncer/userlist.txt

max_client_conn   = ${PGBOUNCER_MAX_CLIENT_CONN}  
default_pool_size = ${PGBOUNCER_POOL_SIZE}        
min_pool_size     = 10                            
reserve_pool_size = 5                             
max_db_connections = 100                          

server_idle_timeout = 600   


log_connections    = 1
log_disconnections = 1